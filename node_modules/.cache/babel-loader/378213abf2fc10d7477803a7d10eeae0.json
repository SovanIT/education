{"ast":null,"code":"import _classCallCheck from \"/home/trisys-it/education/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/trisys-it/education/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport * as crypto from 'crypto-js';\nimport constants from './constants';\nexport var StorageUtil =\n/*#__PURE__*/\nfunction () {\n  function StorageUtil() {\n    _classCallCheck(this, StorageUtil);\n  }\n\n  _createClass(StorageUtil, null, [{\n    key: \"getItem\",\n    value: function getItem(key) {\n      var value = undefined;\n\n      if (key) {\n        var appDataStr = localStorage.getItem(this.appKey);\n        var appData = appDataStr ? JSON.parse(this.decrypt(appDataStr)) : {};\n        value = appData[key];\n      }\n\n      return value;\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(key, value) {\n      var result = false;\n\n      if (key && value) {\n        var appDataStr = localStorage.getItem(this.appKey);\n        var appData = appDataStr ? JSON.parse(this.decrypt(appDataStr)) : {};\n        appData[key] = value;\n        value = JSON.stringify(appData);\n        value = this.encrypt(value);\n        localStorage.setItem(this.appKey, value);\n        result = true;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var appDataStr = localStorage.getItem(this.appKey);\n      var appData = appDataStr ? JSON.parse(this.decrypt(appDataStr)) : {};\n      delete appData[key];\n      localStorage.setItem(this.appKey, this.encrypt(JSON.stringify(appData)));\n    }\n  }, {\n    key: \"deleteStorageData\",\n    value: function deleteStorageData() {\n      localStorage.removeItem(this.appKey);\n    }\n  }, {\n    key: \"deleteAll\",\n    value: function deleteAll() {\n      localStorage.clear();\n    }\n  }, {\n    key: \"encrypt\",\n    value: function encrypt(value) {\n      return crypto.AES.encrypt(value, this.encKey);\n    }\n  }, {\n    key: \"decrypt\",\n    value: function decrypt(value) {\n      return crypto.AES.decrypt(value, this.encKey).toString(crypto.enc.Utf8);\n    }\n  }]);\n\n  return StorageUtil;\n}();\nStorageUtil.encKey = constants.ENCRYPTION_KEY;\nStorageUtil.appKey = constants.APP_KEY;","map":{"version":3,"sources":["/home/trisys-it/education/src/utils/StorageUtil.js"],"names":["crypto","constants","StorageUtil","key","value","undefined","appDataStr","localStorage","getItem","appKey","appData","JSON","parse","decrypt","result","stringify","encrypt","setItem","removeItem","clear","AES","encKey","toString","enc","Utf8","ENCRYPTION_KEY","APP_KEY"],"mappings":";;AAAA,OAAO,KAAKA,MAAZ,MAAwB,WAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AAEA,WAAaC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,4BAKiBC,GALjB,EAKsB;AAClB,UAAIC,KAAK,GAAGC,SAAZ;;AACA,UAAIF,GAAJ,EAAS;AACP,YAAIG,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAAKC,MAA1B,CAAjB;AACA,YAAIC,OAAO,GAAGJ,UAAU,GAAGK,IAAI,CAACC,KAAL,CAAW,KAAKC,OAAL,CAAaP,UAAb,CAAX,CAAH,GAA0C,EAAlE;AACAF,QAAAA,KAAK,GAAGM,OAAO,CAACP,GAAD,CAAf;AACD;;AACD,aAAOC,KAAP;AACD;AAbH;AAAA;AAAA,4BAeiBD,GAfjB,EAesBC,KAftB,EAe6B;AACzB,UAAIU,MAAM,GAAG,KAAb;;AACA,UAAIX,GAAG,IAAIC,KAAX,EAAkB;AAChB,YAAIE,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAAKC,MAA1B,CAAjB;AACA,YAAIC,OAAO,GAAGJ,UAAU,GAAGK,IAAI,CAACC,KAAL,CAAW,KAAKC,OAAL,CAAaP,UAAb,CAAX,CAAH,GAA0C,EAAlE;AACAI,QAAAA,OAAO,CAACP,GAAD,CAAP,GAAeC,KAAf;AACAA,QAAAA,KAAK,GAAGO,IAAI,CAACI,SAAL,CAAeL,OAAf,CAAR;AACAN,QAAAA,KAAK,GAAG,KAAKY,OAAL,CAAaZ,KAAb,CAAR;AACAG,QAAAA,YAAY,CAACU,OAAb,CAAqB,KAAKR,MAA1B,EAAkCL,KAAlC;AACAU,QAAAA,MAAM,GAAG,IAAT;AACD;;AACD,aAAOA,MAAP;AACD;AA3BH;AAAA;AAAA,2BA6BgBX,GA7BhB,EA6BqB;AACjB,UAAIG,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAAKC,MAA1B,CAAjB;AACA,UAAIC,OAAO,GAAGJ,UAAU,GAAGK,IAAI,CAACC,KAAL,CAAW,KAAKC,OAAL,CAAaP,UAAb,CAAX,CAAH,GAA0C,EAAlE;AACA,aAAOI,OAAO,CAACP,GAAD,CAAd;AACAI,MAAAA,YAAY,CAACU,OAAb,CAAqB,KAAKR,MAA1B,EAAkC,KAAKO,OAAL,CAAaL,IAAI,CAACI,SAAL,CAAeL,OAAf,CAAb,CAAlC;AACD;AAlCH;AAAA;AAAA,wCAoC6B;AACzBH,MAAAA,YAAY,CAACW,UAAb,CAAwB,KAAKT,MAA7B;AACD;AAtCH;AAAA;AAAA,gCAwCqB;AACjBF,MAAAA,YAAY,CAACY,KAAb;AACD;AA1CH;AAAA;AAAA,4BA4CiBf,KA5CjB,EA4CwB;AACpB,aAAOJ,MAAM,CAACoB,GAAP,CAAWJ,OAAX,CAAmBZ,KAAnB,EAA0B,KAAKiB,MAA/B,CAAP;AACD;AA9CH;AAAA;AAAA,4BAgDiBjB,KAhDjB,EAgDwB;AACpB,aAAOJ,MAAM,CAACoB,GAAP,CAAWP,OAAX,CAAmBT,KAAnB,EAA0B,KAAKiB,MAA/B,EAAuCC,QAAvC,CAAgDtB,MAAM,CAACuB,GAAP,CAAWC,IAA3D,CAAP;AACD;AAlDH;;AAAA;AAAA;AAAatB,W,CAEJmB,M,GAASpB,SAAS,CAACwB,c;AAFfvB,W,CAGJO,M,GAASR,SAAS,CAACyB,O","sourcesContent":["import * as crypto from 'crypto-js';\nimport constants from './constants';\n\nexport class StorageUtil {\n\n  static encKey = constants.ENCRYPTION_KEY\n  static appKey = constants.APP_KEY\n\n  static getItem(key) {\n    let value = undefined\n    if (key) {\n      let appDataStr = localStorage.getItem(this.appKey)\n      let appData = appDataStr ? JSON.parse(this.decrypt(appDataStr)) : {}\n      value = appData[key]\n    }\n    return value\n  }\n\n  static setItem(key, value) {\n    let result = false\n    if (key && value) {\n      let appDataStr = localStorage.getItem(this.appKey)\n      let appData = appDataStr ? JSON.parse(this.decrypt(appDataStr)) : {}\n      appData[key] = value\n      value = JSON.stringify(appData)\n      value = this.encrypt(value)\n      localStorage.setItem(this.appKey, value)\n      result = true\n    }\n    return result\n  }\n\n  static remove(key) {\n    let appDataStr = localStorage.getItem(this.appKey)\n    let appData = appDataStr ? JSON.parse(this.decrypt(appDataStr)) : {}\n    delete appData[key]\n    localStorage.setItem(this.appKey, this.encrypt(JSON.stringify(appData)))\n  }\n\n  static deleteStorageData() {\n    localStorage.removeItem(this.appKey)\n  }\n\n  static deleteAll() {\n    localStorage.clear()\n  }\n\n  static encrypt(value) {\n    return crypto.AES.encrypt(value, this.encKey)\n  }\n\n  static decrypt(value) {\n    return crypto.AES.decrypt(value, this.encKey).toString(crypto.enc.Utf8)\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}